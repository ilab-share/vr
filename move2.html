<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>

  <body>
    <a-scene>

      <a-box id="box" position="0 1 -3" color="tomato"></a-box>

      <!-- 右手コントローラ（レーザーポインタ） -->
      <a-entity id="hand"
        laser-controls="hand: right"
        raycaster="objects: #box"></a-entity>

      <script>
        const hand = document.querySelector("#hand");
        const box = document.querySelector("#box");

        let grabbed = false;
        let offset = new THREE.Vector3();

        // つかむ
        hand.addEventListener("triggerdown", () => {
          const hits = hand.components.raycaster.intersections;
          if (!hits.length) return;
          if (hits[0].object.el !== box) return;

          grabbed = true;
          offset.copy(box.object3D.position)
                .sub(hand.object3D.position);
        });

        // 離す
        hand.addEventListener("triggerup", () => grabbed = false);

        // 毎フレーム更新（tick イベント）
        hand.addEventListener("tick", () => {
          if (!grabbed) return;
          box.object3D.position.copy(hand.object3D.position).add(offset);
        });
      </script>

    </a-scene>
  </body>
</html>
