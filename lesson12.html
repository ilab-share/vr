<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>
    <a-scene cursor="rayOrigin: mouse">
		<a-entity id="ctlR" laser-controls="hand: right" raycaster="showLine: false;"></a-entity>
		<a-entity id="ctlL" laser-controls="hand: left" raycaster="showLine: true; lineColor: green;"></a-entity>
    </a-scene>

	<script>
		let isPressed = false;
			
		setInterval(function(){
			if(isPressed){
				let ctlR = document.querySelector('#ctlR').object3D;//右コントローラーの座標
				let posR = ctlR.position.x + " " + ctlR.position.y + " " + ctlR.position.z;

				let draw = document.createElement("a-sphere");//sphereを動的生成
				draw.setAttribute("radius", "0.05");
				draw.setAttribute("position", posR);
				draw.setAttribute("color", "red");
				
		        draw.addEventListener("click", function (e) {//クリックされたら消える
            		this.remove();
          		});
          
				let scene = document.querySelector("a-scene");
				scene.appendChild(draw);//シーンにsphereを追加（表示）
			}
		}, 33);
		
	    $('#ctlR').on('triggerdown', function() {//AボタンDown トリガーDown
      		isPressed = true;
    	});
    	
    	$('#ctlR').on('triggerup', function() {//AボタンUP トリガーUP
      		isPressed = false;
    	});
    
    
	</script>


  </body>
</html>
